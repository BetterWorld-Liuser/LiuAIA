var y=Object.defineProperty;var w=(s,t,e)=>t in s?y(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var l=(s,t,e)=>(w(s,typeof t!="symbol"?t+"":t,e),e);import{B as T,S as p,i as d,s as h,k as A,l as b,m as v,h as m,n as S,b as $,P as c,o as M,V as P,w as C,x as D,y as L,f as k,t as E,z as x}from"./index-f202cad1.js";import{_ as z}from"./preload-helper-b21cceae.js";const B=T();class F{constructor(t,e){l(this,"Amap");l(this,"map");l(this,"_location");l(this,"mouseTool");this.Amap=t,this.map=e,this._location=[0,0],this.mouseTool=new t.MouseTool(this.map),this.mouseTool.graphics=[],this.mouseTool.drawState=!1,this.map.on("mousemove",o=>{this._location=[o.lnglat.getLng(),o.lnglat.getLat()]}),this.mouseTool.on("draw",o=>{console.log("\u7ED8\u56FE\u7ED3\u675F"),console.log(o),this.mouseTool.graphics.push(o.obj)})}get district(){return new this.Amap.DistrictSearch({extensions:"all",level:"district"})}get roadNet(){return new this.Amap.TileLayer.RoadNet}get location(){return this._location}districtSearch(t){return console.log("\u6B63\u5728\u641C\u7D22:"+t),new Promise((e,o)=>{this.district.search(t,(a,n)=>{n.info=="OK"?e(n):o("\u8BF7\u6C42\u5931\u8D25")})})}laydistrict(t){if(console.log(t),t==null)return;const e=t.districtList[0].boundaries,o=[];if(e)for(let a=0,n=e.length;a<n;a++){const u=new this.Amap.Polygon({strokeWeight:1,path:e[a],fillOpacity:.4,fillColor:"#80d8ff",strokeColor:"#0091ea"});o.push(u)}this.add(o)}add(t){this.map.add(t)}startPolygon(t="polygon"){this.mouseTool.drawState=!0,this.mouseTool[t]({fillColor:"#00b0ff",strokeColor:"#80d8ff"})}closePolygon(t){this.mouseTool.close(t)}cleanPolygon(){this.mouseTool.close(!0),this.mouseTool.graphics=[],this.mouseTool.drawState=!1}}function G(s){let t;return{c(){t=A("div"),this.h()},l(e){t=b(e,"DIV",{class:!0}),v(t).forEach(m),this.h()},h(){S(t,"class","container svelte-1c3rqzg")},m(e,o){$(e,t,o),s[1](t)},p:c,i:c,o:c,d(e){e&&m(t),s[1](null)}}}let O="e5acdc2ffb967abcdef36c5c605341d3";function V(s,t,e){let o,a,n=[113.11915,36.200259];async function u(){let i=await z(()=>import("./index-108bff47.js").then(_=>_.i),[],import.meta.url);window._AMapSecurityConfig={securityJsCode:O};let r=await i.load({key:"503820a8a61cff6d396d3f3b82f6dc6b",version:"2.0",plugins:["AMap.Scale","AMap.DistrictSearch","AMap.MouseTool"]}),g=new r.Map(o,{zoom:15,center:n,layers:[new AMap.TileLayer.Satellite]});return{Amap:r,map:g}}M(async()=>{let{Amap:i,map:r}=await u();a=new F(i,r),B.set(a)});function f(i){P[i?"unshift":"push"](()=>{o=i,e(0,o)})}return[o,f]}class q extends p{constructor(t){super(),d(this,t,V,G,h,{})}}function I(s){let t,e;return t=new q({}),{c(){C(t.$$.fragment)},l(o){D(t.$$.fragment,o)},m(o,a){L(t,o,a),e=!0},p:c,i(o){e||(k(t.$$.fragment,o),e=!0)},o(o){E(t.$$.fragment,o),e=!1},d(o){x(t,o)}}}class J extends p{constructor(t){super(),d(this,t,null,I,h,{})}}export{J as P,B as g};
